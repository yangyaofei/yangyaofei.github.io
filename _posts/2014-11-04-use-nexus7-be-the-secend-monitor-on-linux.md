---
layout	: post
title	: linux下 用平板当第二屏幕
date	: 2014-11-04
author	: yangyaofei
tags	:
    - 折腾
    - linux
    - android
---


>写程序的时候总觉得地方不够用,调试的时候更是查看个变量都费劲.穷逼没有钱买第二块显示器,而且携带不方便.
>
这时突然想到.靠!咱不是有省吃俭用一年买的nexus7么?竖着立在那里当第二屏幕不是很爽很不错么.有了这个想法之后便操起浏览器各种google百度.发现win下和在MAC哦下都是有这样的程序的,而且要钱,虽然咱们有超级中文汉化破解版,但是表示想在linux下练手写代码的我来说不是很吸引人.故放弃了这些软件,自己去想办法.
>
经过我不懈努力的寻找终于出土了一个不错的办法.那就是用VNC,VNC 可以复制屏幕的内容,在别的地方登陆类似win的远程登陆,这样我就可以复制屏幕了!
>
PS:当然如果你真的是大神的话xdmx+Xserver才是最正宗的解决方案,小弟玩不转,xorg各种设置各种花屏,而且android下自己编译一个Xserver+Xdmx自己真心玩不来.
>
PPS:Xserver貌似已经有人弄出android版的了,想玩的童鞋可以去搜.
>
但是光光复制屏幕是不管用的,要让平板当第二屏幕要让电脑自己真的虚拟一个第二屏幕出来才行啊.啊呀呀呀这个可难为死我了,然后我就操着我那羊毛英语写的关键词各种大海捞针.
最后又想到我在VGA口上我差一个插头让他自己识别出来不旧好了!然后硬着头皮看VGA时序啊什么想看看它怎么识别有显示器链接的,嘛~~最后一无所获.
>
继续google~~终于黄天不负有心的程序猿,外国某个哥们也想到了这个,用了几个电阻搞定了!我立马淘宝买件回来实验终于成功!下面是方法.

# 正文

## 一 VGA接口

首先你要有三个75欧姆的电阻(50~100应该都可以),贴片还是那个金属丝的那种(不知道学名)随便,相信自己的焊接技术可以用贴片的,配合好了可以做的很好看很小.不会焊的可以买那种金属丝的

PS:我买的贴片的苦逼的焊了俩小时,而且很丑...............
还有一个VGA接口,可以是只有一个接口的自己把电阻焊接上,也可以买公对母的连接头直接把电阻插进去就好了.网上有90度转弯的,不错.
然后按照这个图焊接就好
![VGA链接方法](/img/post/2014-11/1.jpg)

看清楚上下左右,焊错了没准会烧掉东西.焊好了用万用表试试电阻对不对.

这是外国大哥做的

![VGA成品](/img/post/2014-11/2.jpg)

这是我做的,里面惨不忍睹你们就不要看了`(^_^)`

![(^.^)](/img/post/2014-11/3.jpg)

## 二 系统设置

现在你将制作好的VGA接口插上之后年闹就能认出你有一个显示器了!但是还是需要设置才能用的!

### 1安装VNC软件

我用的是X11VNC这个直接显示的是Xserver下的你的桌面,而VNC4server貌似需要你设置或者做不到,这么麻烦我当然不用了!
我下面按照ubuntu的来写的,别的系统的明白意思就好了!

	sudo apt-get install x11vnc

安装完成后插上你的VGA识别出第二显示器就可以先看一眼效果了!

PS:ubuntu默认的插入显示器是拼接的,不是复制屏幕,这样才可以实现这个功能,如果你的系统不是这样的自己百度下查查怎么改成拼接的吧类似这样

![](/img/post/2014-11/4.jpg)

然后终端运行VNC

	x11vnc

然后在自己的平板上下一个VNCviewer,用IP地址:端口号登陆就好了(端口号软件运行之后有写我没记住)

截图就不上了,反正就是和上图是差不多的,上图的右边那部分是在自己的显示器里面看不见的,在平板上可以看见,这样就相当于平板当了第二屏幕了!
PS:x11vnc有设置密码什么的选项,我就不细说了`man x11vnc`看一下文档或者百度下就有了.

出来了可以用了就完了么?nonono,没有,第一右边区域的分辨率可能不和你的平板分辨率一样,用的时候各种不舒服斯基,第二不能每次都自己在平板是上放大然后调整成想要的那部分.我们要让vnc只输出第二屏幕的那部分,这样还可以省带宽!

so.............

### 2 设置软件

####2.1 调整分辨率

那个识别出来的显示器的分辨率是有限的,要实现自己平板的那个分辨率的输出需要添加自己的分辨率
首先查询自己的分辨率的信息 比如我的是1280x800的

	cvt 1280 800

会得到类似这种信息

	# 1280x800 59.81 Hz (CVT 1.02MA) hsync: 49.70 kHz; pclk: 83.50 MHz
	Modeline "1280x800_60.00" 83.50 1280 1352 1480 1680 800 803 809 831 -hsync +vsync

我们需要第二行的数据,从modeline后面开始,新建和添加这个Modeline

	xrandr --newmode "1280x800_60.00" 83.50 1280 1352 1480 1680 800 803 809 831 -hsync +vsync
	xrandr --addmode VGA1 1280x800_60.00 #所有的x是小写的X不是*

好了现在去上一张图的那个设置里面看VGA的那个分辨率是不是已经有自己刚才添加的那个了,有的话改过来就好了!

PS:上面的参数VGA1不固定有可能是VGA0等等,可以运行xrandr查看你现在链接的显示器有什么,上面就会有名字,LVDS的是笔记本的显示屏.
就这样分辨率就调好了,当然我会习惯把第二屏幕竖着转90度,调试方便.这个个人喜好了....

#### 2.2 输出第二屏幕部分

这个比较简单,就是运行x11vnc的时候加上clip这个参数比如我要用的是1280x800的平板,我的屏幕是1366x768,所以我就这样写

	x11server -clip 800x1280+1366+0

意思是我输出屏幕大小是800x1280(我竖着用),然后像素点从整个屏幕的横着1366竖着0开始,恩,就这么多了

ps:刚刚发现第二屏幕放在右边显示不完全,我放在下面就很好那样vnc的参数要改成800x1280+0+768

最后是我自己的运行效果!

![](/img/post/2014-11/5.jpg)

# 后记

有人指出可以不用VGA接头来虚拟一个屏幕,直接可软虚拟

用xrandr创建一个:

## 1 先看看有什么，将要使用VGA1：

	$xrandr
	Screen 0: minimum 320 x 200, current 1366 x 768, maximum 32767 x 32767
	LVDS1 connected 1366x768+0+0 (normal left inverted right x axis y axis) 293mm x 164mm
	1366x768 60.0*+ 40.0
	1024x768 60.0
	800x600 60.3 56.2
	640x480 59.9
	VGA1 disconnected (normal left inverted right x axis y axis)
	HDMI1 disconnected (normal left inverted right x axis y axis)
	DP1 disconnected (normal left inverted right x axis y axis)

## 2 获取参数, 分辨率1024x650,60Hz


	$cvt 1024 650 60
	# 1024x650 59.76 Hz (CVT) hsync: 40.40 kHz; pclk: 53.00 MHz
	Modeline "1024x650_60.00" 53.00 1024 1072 1168 1312 650 653 663 676 -hsync +vsync

## 3 添加新的mode，并将新显示器放置在LVDS1的左边，其中LVDS1是本来就有的显示器，见第一步输出

	$xrandr --newmode "1024x650_60.00" 53.00 1024 1072 1168 1312 650 653 663 676 -hsync +vsync
	$xrandr --addmode VGA1 1024x650_60.00
	$xrandr --output LVDS1 --panning 1366x768+1024+0

## 4 确认

	$xrandr
	Screen 0: minimum 320 x 200, current 2390 x 768, maximum 32767 x 32767
	LVDS1 connected 1366x768+1024+0 (normal left inverted right x axis y axis) 293mm x 164mm panning 1366x768+1024+0
	1366x768 60.0*+ 40.0
	1024x768 60.0
	800x600 60.3 56.2
	640x480 59.9
	VGA1 disconnected 1024x650+0+0 (normal left inverted right x axis y axis) 0mm x 0mm
	1024x650_60.00 59.8*
	HDMI1 disconnected (normal left inverted right x axis y axis)
	DP1 disconnected (normal left inverted right x axis y axis)


## 5 x11vnc
运行
